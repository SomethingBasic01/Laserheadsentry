local neuralInterface = peripheral.find("neuralInterface")
if not neuralInterface then
    error("Must have a neural interface", 0)
end

print("Neural Interface found")

if not neuralInterface.hasModule("plethora:glasses") then error("Cannot find overlay glasses module", 0) end

print("All required modules found in neural interface")

-- Get the canvas from the neural interface
local canvas = neuralInterface.canvas()

print("Canvas initialized")

-- Create a rectangle and text on the canvas
local buttonAdd = canvas.addRectangle(10, 10, 100, 20, 0x00FF00)
canvas.addText(15, 15, "Add Entity")

-- Function to handle touch events
local function handleTouch()
    while true do
        local event, side, xPos, yPos = os.pullEvent("glasses_click")

        -- Print coordinates for debugging
        print("Touch coordinates: ", xPos, yPos)

        -- Check if the touch event coordinates are within the button
        if buttonAdd:contains(xPos, yPos) then
            print("Add Entity button clicked")
        else
            print("Click detected outside the button")
        end
    end
end

-- Run the handleTouch function
parallel.waitForAny(handleTouch)
